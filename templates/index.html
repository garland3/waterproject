<!-- index.html -->
{% extends "base.html" %}

{% block title %}Garden Water Control{% endblock %}

{% block content %}
    <a href="/" class="text-3xl font-bold mb-4">Garden Water Control</a>
    <p> Current time is: {{current_time}}</p>
    {% if message %}
    <p class="text-lg text-green-300">{{ message }}</p>
    {% endif %}
    
    <table class="table-auto border-collapse mx-auto">
        <tr>
            <th class="px-4 py-2 text-center">Device</th>
            <th class="px-4 py-2 text-center">Location</th>
            <th class="px-4 py-2 text-center">Status</th>
            <th class="px-4 py-2 text-center">Action</th>
        </tr>
        {% for device in devices %}
        <tr class="{{ 'bg-green-200' if device.state else 'bg-red-200' }}">
            <td class="px-4 py-2 text-center">{{ device.name }}</td>
            <td class="px-4 py-2 text-center">{{ device.location }}</td>
            <td class="px-4 py-2 text-center">{{ "ON" if device.state else "OFF" }}</td>
            <td class="px-4 py-2 text-center">
                <form action="/toggle/{{ device.pin }}" method="post" style="display:inline;">
                    <button type="submit" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">Toggle</button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </table>
    <p class="text-center mt-4 mb-4">
        <a href="/schedule" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">Set Schedule</a>
    </p>
    <p class="text-center mt-4 mb-4">
        <a href="/log_download" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">Download Log</a>
    </p>
{% endblock %}
